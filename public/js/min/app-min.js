angular.module("carTrackerApp",["ngRoute"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"/temps/menu.temp.html",controller:"MenuController"}).when("/fuel-input",{templateUrl:"/temps/fuel-input.temp.html",controller:"CarTrackerController"}).when("/oil-level-input",{templateUrl:"/temps/oil-level-input.temp.html",controller:"OilLevelController"})}]);var carTrackerApp=angular.module("carTrackerApp");carTrackerApp.controller("MenuController",["$scope","$location",function(a,b){a.goTo=function(a){b.path(a)}}]),carTrackerApp.controller("CarTrackerController",["$scope","couchReq",function(a,b){b.get({view:"fuel",queryParams:{limit:25}}).then(function(c){a.history=b.parseTimestamps(c)});var c={timestamp:"",type:"fuel",car:"Gypsy-Danger",odometer:"",gallons:"",price:"",total:"",location:"",fuelGrade:""};a.newRefuel={},a.submitForm=function(){b.add(a.newRefuel)},a.resetForm=function(){for(var b in c)a.newRefuel[b]=c[b]},a.resetForm()}]),carTrackerApp.controller("OilLevelController",["$scope","couchReq",function(a,b){b.get({view:"oil",queryParams:{limit:25}}).then(function(c){a.history=b.parseTimestamps(c)});var c={timestamp:"",type:"oil",car:"Gypsy-Danger",odometer:"",oilLevel:0,engineTemp:""};a.newOilLevelCheck={},a.updateOilAmount=function(b){a.newOilLevelCheck.oilLevel=Math.round(b.offsetX/document.getElementById("oilLevelIndicator").clientWidth*100)},a.submitForm=function(){b.add(a.newOilLevelCheck)},a.resetForm=function(){for(var b in c)a.newOilLevelCheck[b]=c[b]},a.resetForm()}]);var carTrackerApp=angular.module("carTrackerApp");carTrackerApp.directive("submissionButtons",function(){return{templateUrl:"/temps/submission-buttons.temp.html"}});var carTrackerApp=angular.module("carTrackerApp");carTrackerApp.service("couchReq",["$http",function(a){this.get=function(b){return a({url:"/api/get",method:"POST",data:b,headers:{"Content-Type":"application/json"}}).then(function(a){return console.log("RETRIEVED: "+a.data.rows),a.data.rows},function(a){console.log(a)})},this["delete"]=function(b,c){return a({url:"/api",method:"DELETE",data:{_id:b,_rev:c},headers:{"Content-Type":"application/json"}}).then(function(a){console.log("DELETED: "+a.data)},function(a){console.log(a)})},this.add=function(b){return a({url:"/api",method:"POST",data:b,headers:{"Content-Type":"application/json"}}).then(function(a){return console.log("POST NEW SUCCESSFUL: "+a),{id:a.id,rev:a.rev}},function(a){console.log(a)})},this.update=function(b){return b.hasOwnProperty("$$hashKey")&&delete b.$$hashKey,a({url:"/api",method:"PUT",data:b,headers:{"Content-Type":"application/json"}}).then(function(a){console.log("PUT SUCCESSFUL: "+a)},function(a){console.log(a)})},this.parseTimestamps=function(a){return a.forEach(function(a){if(a.value.timestamp){var b=new Date(a.value.timestamp);a.value.timestamp=b.toLocaleDateString()}}),a}}]);